
<head>
	<link rel="stylesheet" type="text/css" href="/www/css/partySearch.css">
	<link rel="stylesheet" type="text/css" href="/www/css/partyCreate.css">
	<meta name = "viewport" content = "width = device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=no;">		
</head>

<div id="all">

	<div id="searchBar2" class="row"> 
		<div id="secc" class="col-xs-4">
			<div id="menuOption">
				<button id="btn" ng-click="enableTodayPartysMenu()" class="btn btn-success">
					<img id="icon" src="/dist/img/icons/calendarIcon.png" class="img-responsive" alt="Cinque Terre"></img>
				</button>
	
				<div id="text"> Hoy </div>
			</div>
		</div>

		<div id="secc2" class="col-xs-4">			
			<div id="menuOption">
				<button id="btn" ng-click="enableCloseByPartysMenu()" class="btn btn-success">
					<img id="icon" src="/dist/img/icons/mpIcon.png" class="img-responsive" alt="Cinque Terre"></img>		
				</button>

				<div id="text"> cerca </div>
			</div>
		</div>

		<div id="secc3" class="col-xs-4">		
			<div id="menuOption">
				<button id="btn" ng-click="enablePartyTypesMenu()" class="btn btn-success">
					<img id="icon" src="/dist/img/icons/partyIcon.png" class="img-responsive" alt="Cinque Terre"></img>		
				</button>
				
				<div id="text"> por tipo </div>
			</div>
		</div>
	</div>

	<div id="menuTodaysPartys" ng-show="showMenu == 1">
		<div id="dateForm">
<!--			<input id="dayForm" class="form-control-unstyled"></input>
			/     
			<input id="monthForm" type="text" class="form-control-unstyled"></input>
			/
			<input id="yearForm" type="text" class="form-control-unstyled"></input>
/!-->	
			<label>Fecha y duración</label>

			<div class="form-group" id="dateSelect">
				<div class="input-group">
					<div class="input-group-addon">
						<i class="fa fa-clock-o"></i>
					</div>

					<input type="text" class="form-control pull-right daterange" id="reservationtime">
				</div>
			</div>

			<div class="form-group" id="dateButton">
				<button id="okBtn" ng-click="findTodayPartys()" class="btn btn-success">
					<img src="/dist/img/icons/go.png" class="img-responsive" alt="Cinque Terre"></img>
				</button>
			</div>
		</div>
	</div>

	<div id="menuCloseByPartys" ng-show="showMenu == 2">

		<div id = "closeBySelection">
			<div id="current">Initializing...</div>

			<div id="map_canvas" style="width:300px; height:300px"></div>
			<meta name = "viewport" id="mapView">			
		</div>

		<div id = "closeBySelection">
			max: 
			<input id="toleranceForm" class="form-control-unstyled"></input>
			Km

			<button id="okBtn" ng-click="findCloseByPartys()" class="btn btn-success-unstyled">
				<img id="iconOk" src="/dist/img/icons/go.png" class="img-responsive" alt="Cinque Terre"></img>
			</button>
		</div>
	</div>

	<div id="menuPartyTypes" ng-show="showMenu == 3">
				<div class="form-group">
					<label>Tipo de fiesta: </label> <span ng-repeat="item in selectedItems" >{{item.text + ($last?'':', ') }}</span>
					<div class="row">
						<pre-go-selector available-items="partyTypes" selected-items="selectedItems"/>
					</div>					
				</div> 

		<div id = "typeSelection">
			<button id="okBtn" ng-click="getAllPartys()" class="btn btn-success">
				<img src="/dist/img/icons/go.png" class="img-responsive" alt="Cinque Terre"></img>
			</button>
		</div>
	</div>


	<div id="ptys">
		<div class="list-group" ng-repeat="pty in promoted_partys">
			<a id="promParty" href="#" class="list-group-item" ng-style="{'background-image':'url({{pty.imagenBanner}})'}">	

				<div id="partyStuff" class="row">
					<div id="dist" class="col-xs-4">
						<img id="icon" src="/dist/img/icons/mpIcon.png" href="#" class="img-responsive" alt="Cinque Terre"></img>	
						<div id="text"> {{pty.dist}}km</div>
					</div>				

					<div id="people" class="col-xs-4">
						<img id="icon" src="/dist/img/icons/pplIcon.png" href="#" class="img-responsive" alt="Cinque Terre"></img>	
						<div id="text"> {{pty.cantidadDeGente}} </div>
					</div>

					<div id="fireIcon" class="col-xs-4" ng-style="{'background-image':'url({{pty.flama}})'}"></div>
				</div>
			</a>
		</div>

		<div class="list-group" ng-repeat="pty in common_partys">
			<a id="commonParty" href="#" class="list-group-item" ng-style="{'background-image':'url({{pty.imagenBanner}})', 'background-size':'cover'}">	

				<div id="partyStuff" class="row">
					<div id="dist" class="col-xs-4">
						<img id="icon" src="/dist/img/icons/mpIcon.png" href="#" class="img-responsive" alt="Cinque Terre"></img>	
						<div id="text"> {{pty.dist}}km</div>
					</div>				
					<div id="people" class="col-xs-4">
						<img id="icon" src="/dist/img/icons/pplIcon.png" href="#" class="img-responsive" alt="Cinque Terre"></img>	
						<div id="text"> {{pty.cantidadDeGente}} </div>
					</div>

					<div id="fireIcon" class="col-xs-4" ng-style="{'background-image':'url({{pty.flama}})'}"></div>
				</div>
			</a>
		</div>
	</div>
</div>	

<script>
 /*"2015-12-08T18:14:20.070Z",
					"2015-12-08T19:14:20.070Z"*/
	   //"08/12/2015 23:00 PM"
	   /*var hoy = ;
	   var mañana = moment().add(1, 'days').hours(6).minutes(0).seconds(0);
	   */
		var rangoEstaNoche = [moment().hours(23).minutes(0).seconds(0), 								moment().add(1, 'days').hours(6).minutes(0).seconds(0)];
		var rangoSabado =	 [moment().endOf("week").hours(23).minutes(0).seconds(0), 					moment().endOf("week").add(1, 'days').hours(6).minutes(0).seconds(0) ];
		var rangoViernes = 	[moment().endOf("week").add(-1, 'days').hours(23).minutes(0).seconds(0), 	moment().endOf("week").hours(6).minutes(0).seconds(0) ];

		$('.daterange').on('apply.daterangepicker', function(ev, picker) {
			$(this).val(picker.startDate.format('DD/MM/YYYY h:mm A') + ' - ' + picker.endDate.format('DD/MM/YYYY h:mm A'));
		});

		$('.daterange').on('cancel.daterangepicker', function(ev, picker) {
			$(this).val('');
		});
		  
	   
      $(function () {
	 
		$('#reservationtime').daterangepicker({
			"autoUpdateInput": false,
			"timePicker": true,
			"timePicker24Hour": true,
			"timePickerIncrement": 60,
			"autoApply": true,
			"dateLimit": {
				"days": 4
			},
			
			"ranges": {
				"Esta noche": rangoEstaNoche,
				"Viernes a la noche": rangoViernes,
				"Sábado a la noche": rangoSabado
			},
			"locale": {
				"format": "DD/MM/YYYY h:mm A",
				"separator": " - ",
				"applyLabel": "Aplicar",
				"cancelLabel": "Cancelar",
				"fromLabel": "Desde",
				"toLabel": "Hasta",
				"customRangeLabel": "Personalizado",
				"daysOfWeek": [
					"Do",
					"Lu",
					"Ma",
					"Mi",
					"Ju",
					"Vi",
					"Sa"					
				],
				"monthNames": [
					"Enero",
					"Febrero",
					"Marzo",
					"Abril",
					"Mayo",
					"Junio",
					"Julio",
					"Augosto",
					"Septiembre",
					"Octubre",
					"Noviembre",
					"Diciembre"
				],
				"firstDay": 0
			},
			"opens": "center",
			"drops": "down"
		});
		
	  
		/*$('#reservationtime').daterangepicker({
			"timePicker": true,
			"timePicker24Hour": true,
			"timePickerIncrement": 60,
			"autoApply": true
		});*/
		//$('#reservationtime').daterangepicker({timePicker24Hour: true, timePicker: true, timePickerIncrement: 60, format: 'MM/DD/YYYY h:mm A'});
	  });
</script>
